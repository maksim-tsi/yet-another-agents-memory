# ============================================================================
# HOME LAB INFRASTRUCTURE - ENVIRONMENT CONFIGURATION
# ============================================================================
# Three-Node Architecture (Post Role Swap - November 2025)
#
# skz-cloud-lv (192.168.107.222) - Backup/Storage Node
#   Services: MinIO, Nextcloud, Prometheus, Grafana
#
# skz-dev-lv (192.168.107.172) - Dev & Platform Node
#   Services: n8n, Redis, Phoenix
#
# skz-data-lv (192.168.107.187) - AI & Data Node
#   Services: PostgreSQL, Qdrant, Neo4j, Typesense
# ============================================================================

# --- NODE IP ADDRESSES ---
CLOUD_NODE_IP=192.168.107.222  # skz-cloud-lv (Backup/Storage Node)
DEV_NODE_IP=192.168.107.172    # skz-dev-lv (Dev & Platform Node)
DATA_NODE_IP=192.168.107.187   # skz-data-lv (AI & Data Node)

# --- SERVICE PORTS ---
# Data Node Services (skz-data-lv)
POSTGRES_PORT=5432
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
NEO4J_BOLT_PORT=7687
NEO4J_HTTP_PORT=7474
TYPESENSE_PORT=8108

# Dev Node Services (skz-dev-lv)
REDIS_PORT=6379
N8N_PORT=5678
PHOENIX_PORT=6006

# Cloud Node Services (skz-cloud-lv)
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
NEXTCLOUD_PORT=8081
PROMETHEUS_PORT=9099
GRAFANA_PORT=3000

# ============================================================================
# CREDENTIALS (DO NOT COMMIT REAL VALUES - USE .env FILE)
# ============================================================================

# --- PostgreSQL (on skz-data-lv) ---
# Centralized database for n8n, Phoenix, and other services
POSTGRES_USER=''
POSTGRES_PASSWORD=''
POSTGRES_DB='postgres'

# n8n Database Configuration
DB_POSTGRESDB_HOST=${DATA_NODE_IP}
DB_POSTGRESDB_PORT=${POSTGRES_PORT}
DB_POSTGRESDB_DATABASE='n8n_production'
DB_POSTGRESDB_USER=${POSTGRES_USER}
DB_POSTGRESDB_PASSWORD=${POSTGRES_PASSWORD}

# --- Redis (on skz-dev-lv) ---
# Cache and queue for n8n and other services
# REDIS_PASSWORD=  # Uncomment if Redis requires authentication

# --- Neo4j (on skz-data-lv) ---
# Graph database for knowledge graphs and relationships
NEO4J_USER=neo4j
NEO4J_PASSWORD=''

# --- Typesense (on skz-data-lv) ---
# Full-text search engine
TYPESENSE_API_KEY=''

# --- Qdrant (on skz-data-lv) ---
# Vector database for embeddings
# QDRANT_API_KEY=  # Uncomment if Qdrant requires authentication

# --- MinIO (on skz-cloud-lv) ---
# S3-compatible object storage for backups
MINIO_ROOT_USER=''
MINIO_ROOT_PASSWORD=''

# --- Nextcloud (on skz-cloud-lv) ---
# Personal cloud storage and file sync
NEXTCLOUD_DB='nextcloud'
NEXTCLOUD_PG_USER=''
NEXTCLOUD_PG_PASSWORD=''

# --- Grafana (on skz-cloud-lv) ---
# Monitoring and observability dashboards
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=''

# --- n8n (on skz-dev-lv) ---
# Workflow automation platform
N8N_HOST=0.0.0.0
N8N_PORT=${N8N_PORT}
N8N_PROTOCOL=http
N8N_LISTEN_ADDRESS=0.0.0.0
WEBHOOK_URL=http://${DEV_NODE_IP}:${N8N_PORT}
N8N_EDITOR_BASE_URL=http://${DEV_NODE_IP}:${N8N_PORT}
N8N_SECURE_COOKIE=false
N8N_RUNNERS_ENABLED=true
N8N_BLOCK_ENV_ACCESS_IN_NODE=false
N8N_GIT_NODE_DISABLE_BARE_REPOS=true

# --- LLM Provider API Keys ---
# Free-tier multi-provider strategy for AI/ML workloads
# Get keys from:
#   • Google Gemini: https://aistudio.google.com/app/apikey
#   • Groq: https://console.groq.com/keys
#   • Mistral AI: https://console.mistral.ai/api-keys/
GOOGLE_API_KEY=''
GROQ_API_KEY=''
MISTRAL_API_KEY=''

# ============================================================================
# DERIVED URLS & CONNECTION STRINGS
# ============================================================================
# Auto-constructed from node IPs and credentials above
# These are used by applications and integration tests

# --- PostgreSQL (Data Node: skz-data-lv) ---
POSTGRES_HOST=${DATA_NODE_IP}
POSTGRES_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${DATA_NODE_IP}:${POSTGRES_PORT}/${POSTGRES_DB}

# --- Redis (Dev Node: skz-dev-lv) ---
REDIS_HOST=${DEV_NODE_IP}
REDIS_URL=redis://${DEV_NODE_IP}:${REDIS_PORT}

# --- n8n (Dev Node: skz-dev-lv) ---
N8N_URL=http://${DEV_NODE_IP}:${N8N_PORT}

# --- Phoenix (Dev Node: skz-dev-lv) ---
PHOENIX_URL=http://${DEV_NODE_IP}:${PHOENIX_PORT}
# Collector endpoint for OTLP traces (HTTP preferred for firewall compatibility)
PHOENIX_COLLECTOR_ENDPOINT=http://${DEV_NODE_IP}:${PHOENIX_PORT}/v1/traces
# Project identification for trace grouping in Phoenix UI
PHOENIX_PROJECT_NAME=mlm-mas-dev

# --- Qdrant (Data Node: skz-data-lv) ---
QDRANT_HOST=${DATA_NODE_IP}
QDRANT_URL=http://${DATA_NODE_IP}:${QDRANT_PORT}
QDRANT_GRPC_URL=http://${DATA_NODE_IP}:${QDRANT_GRPC_PORT}

# --- Neo4j (Data Node: skz-data-lv) ---
NEO4J_HOST=${DATA_NODE_IP}
NEO4J_URI=bolt://${DATA_NODE_IP}:${NEO4J_BOLT_PORT}
NEO4J_BOLT=bolt://${DATA_NODE_IP}:${NEO4J_BOLT_PORT}
NEO4J_HTTP=http://${DATA_NODE_IP}:${NEO4J_HTTP_PORT}

# --- Typesense (Data Node: skz-data-lv) ---
TYPESENSE_HOST=${DATA_NODE_IP}
TYPESENSE_PROTOCOL=http
TYPESENSE_URL=http://${DATA_NODE_IP}:${TYPESENSE_PORT}

# --- MinIO (Cloud Node: skz-cloud-lv) ---
MINIO_ENDPOINT=${CLOUD_NODE_IP}:${MINIO_API_PORT}
MINIO_API_URL=http://${CLOUD_NODE_IP}:${MINIO_API_PORT}
MINIO_CONSOLE_URL=http://${CLOUD_NODE_IP}:${MINIO_CONSOLE_PORT}

# --- Nextcloud (Cloud Node: skz-cloud-lv) ---
NEXTCLOUD_URL=http://${CLOUD_NODE_IP}:${NEXTCLOUD_PORT}

# --- Prometheus (Cloud Node: skz-cloud-lv) ---
PROMETHEUS_URL=http://${CLOUD_NODE_IP}:${PROMETHEUS_PORT}

# --- Grafana (Cloud Node: skz-cloud-lv) ---
GRAFANA_URL=http://${CLOUD_NODE_IP}:${GRAFANA_PORT}
